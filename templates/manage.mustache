{{!
    Mustache template for rendering the manage page table in the filter_autotranslate plugin.

    Purpose:
    This template renders a responsive table displaying translations, with filtering and pagination
    controls. It is used by manage.php to display a list of translations with columns for hash,
    language, source text, translated text, human status, context level, review status, and actions.

    Variables:
    - filter_form: HTML for the filter form (rendered by manage_form.php).
    - table_headers: Array of table header labels.
    - table_rows: Array of table rows, each containing:
        - hash: The translation hash.
        - lang: The language code.
        - source_text: The source text (optional, shown if filtering by a specific language).
        - translated_text: The translated text with appended dates (last modified, last reviewed).
        - human: The human status (Yes/No).
        - contextlevel: The context level.
        - review_status: HTML for the review status indicator (e.g., warning icon if needs review).
        - show_edit_link: Boolean indicating if the edit link should be shown.
        - edit_url: URL for the edit link.
        - edit_label: Label for the edit link.
        - is_rtl: Boolean indicating if the language is right-to-left.
    - pagination: HTML for the pagination bar.
    - has_courseid: Boolean indicating if a courseid is provided (to show the rebuild button).
    - rebuild_url: URL for the rebuild translations action.
    - rebuild_label: Label for the rebuild translations button.

    Design Decisions:
    - Uses Bootstrap classes (table, table-striped, table-responsive) for responsive styling.
    - Conditionally displays source_text and translated_text columns based on the filter_lang parameter.
    - Applies dir="rtl" and right-aligned text for RTL languages to ensure proper text direction.
    - Includes pagination and filter form placeholders for dynamic content.
    - Aligns the filter form and rebuild button using a flex container for proper layout.

    @template
    {
        "filter_form": "<form>...</form>",
        "table_headers": ["Hash", "Language", "Source Text", "Translated Text", "Human", "Context", "Review", "Actions"],
        "table_rows": [
            {
                "hash": "abc123",
                "lang": "ar",
                "source_text": "Hello world",
                "translated_text": "مرحبا بالعالم<br>Modified: 2025-03-25<br>Reviewed: 2025-03-25",
                "human": "No",
                "contextlevel": "Course",
                "review_status": "<span class=\"icon-warning\"></span>",
                "show_edit_link": true,
                "edit_url": "https://example.com/edit.php?id=1",
                "edit_label": "Edit",
                "is_rtl": true
            },
            {
                "hash": "def456",
                "lang": "en",
                "translated_text": "Goodbye world<br>Modified: 2025-03-24",
                "human": "Yes",
                "contextlevel": "Module",
                "review_status": "<span class=\"icon-success\"></span>",
                "show_edit_link": false,
                "is_rtl": false
            }
        ],
        "pagination": "<nav>...</nav>",
        "has_courseid": true,
        "rebuild_url": "https://example.com/rebuild.php?courseid=1",
        "rebuild_label": "Rebuild Translations"
    }
}}
{{! Create a flex container to align the filter form and rebuild button }}
<div class="d-flex justify-content-between align-items-start mb-3">
    {{! Filter form on the left }}
    <div class="flex-grow-1">
        {{{filter_form}}}
    </div>
    {{! Rebuild Translations button on the right, if courseid is provided }}
    {{#has_courseid}}
        <div class="ml-4 align-self-start">
            <a href="{{rebuild_url}}" class="btn btn-primary">{{rebuild_label}}</a>
        </div>
    {{/has_courseid}}
</div>
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                {{#table_headers}}
                    <th scope="col" class="text-left">{{.}}</th>
                {{/table_headers}}
            </tr>
        </thead>
        <tbody>
            {{#table_rows}}
                <tr>
                    <td class="text-left">{{hash}}</td>
                    <td class="text-left">{{lang}}</td>
                    {{#source_text}}
                        <td class="col-6 text-left">{{{source_text}}}</td>
                        <td class="col-6" {{#is_rtl}}dir="rtl" style="text-align: right;"{{/is_rtl}}>{{{translated_text}}}</td>
                    {{/source_text}}
                    {{^source_text}}
                        <td class="col-12" {{#is_rtl}}dir="rtl" style="text-align: right;"{{/is_rtl}}>{{{translated_text}}}</td>
                    {{/source_text}}
                    <td class="text-left">{{{human}}}</td>
                    <td class="text-left">{{contextlevel}}</td>
                    <td class="text-left">{{{review_status}}}</td>
                    <td class="text-left">
                        {{#show_edit_link}}
                            <a href="{{edit_url}}">{{edit_label}}</a>
                        {{/show_edit_link}}
                    </td>
                </tr>
            {{/table_rows}}
        </tbody>
    </table>
</div>
<div class="mb-3">
    {{{pagination}}}
</div>